es          db
index       数据库
type        数据表
document    一行数据

es可以将一个索引中的数据切分为多个shard, 分布在多台服务器上存储, 提升吞吐量和性能。

可以为每个shard创建多个replica副本, 保证es数据高可用。

es写数据过程:
    1)客户端选择一个node发送请求过去, 这个node就是coordinating node(协调节点)。
    2)coordinating node对document进行路由, 将请求转发给对应的node(有primary shard的node)。
    3)primary shard node处理请求, 然后将数据同步到replica node。
    4)coordinating node如果发现primary node和所有replica node都搞定之后, 就返回响应结果给客户端。

es读数据过程:
    1)客户端发送请求到任意一个node(coordinate node)。
    2)coordinate node对doc id进行哈希路由, 在primary shard以及其所有replica中随机选择一个。(负载均衡)
    3)接收请求的node返回document给coordinate node。
    4)coordinate node返回document给客户端。
